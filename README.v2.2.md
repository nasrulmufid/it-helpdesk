# IT Help Desk v2.2.0 - Docker Multi-Service Deployment Guide

## ðŸš€ Overview

IT Help Desk v2.2.0 adalah sistem manajemen tiket dukungan IT yang dibangun dengan Laravel 11 dan PHP 8.2. Versi ini dilengkapi dengan konfigurasi Docker yang mencakup 3 layanan utama: aplikasi Laravel, database MySQL 8.0, dan phpMyAdmin untuk manajemen database.

## ðŸ“‹ Daftar Isi

- [Fitur Baru v2.2.0](#fitur-baru-v220)
- [Spesifikasi Teknis](#spesifikasi-teknis)
- [Persyaratan Sistem](#persyaratan-sistem)
- [Instalasi](#instalasi)
- [Konfigurasi](#konfigurasi)
- [Penggunaan](#penggunaan)
- [Manajemen Container](#manajemen-container)
- [Backup dan Restore](#backup-dan-restore)
- [Troubleshooting](#troubleshooting)
- [Keamanan](#keamanan)

## ðŸ†• Fitur Baru v2.2.0

- **Multi-Service Architecture**: 3 layanan dalam satu orchestration Docker
- **MySQL Integration**: Database MySQL 8.0 dengan optimasi performa
- **phpMyAdmin**: Interface web untuk manajemen database
- **Health Checks**: Monitoring otomatis kesehatan layanan
- **Volume Persisten**: Data aman dan tersedia antar restart
- **Environment Flexibility**: Konfigurasi mudah per-environment
- **Backup Otomatis**: Skrip backup database dan storage
- **Security Headers**: Perlindungan keamanan tambahan

## ðŸ”§ Spesifikasi Teknis

### Versi Komponen
- **Laravel Framework**: 11.x
- **PHP**: 8.2-apache
- **MySQL**: 8.0.35
- **phpMyAdmin**: 5.2.1
- **Composer**: Latest stable
- **Node.js**: 18.x LTS

### Port Mapping
- **Aplikasi**: `localhost:8000`
- **phpMyAdmin**: `localhost:8080`
- **MySQL**: `localhost:3306` (internal)

### Network Configuration
- **Network Name**: `it-helpdesk-network`
- **Subnet**: `172.20.0.0/16`
- **DNS Resolution**: Otomatis antar container

## ðŸ’» Persyaratan Sistem

### Minimum Requirements
- **OS**: Windows 10, macOS 10.15, atau Linux (Ubuntu 18.04+)
- **RAM**: 4GB (8GB recommended)
- **Storage**: 10GB free space
- **Docker**: Version 20.10+
- **Docker Compose**: Version 2.0+

### Installation Check
```bash
# Check Docker version
docker --version

# Check Docker Compose version
docker-compose --version
```

## ðŸš€ Instalasi

### 1. Clone Repository
```bash
git clone https://github.com/nasrulmufid/it-help-desk.git
cd it-help-desk
```

### 2. Setup Environment
```bash
# Copy environment file
cp .env.docker .env

# Edit configuration if needed
nano .env
```

### 3. Build dan Deploy
```bash
# Make deployment script executable
chmod +x scripts/deploy.sh

# Run deployment
./scripts/deploy.sh deploy
```

### 4. Verifikasi Instalasi
Tunggu 2-3 menit untuk semua layanan siap, kemudian:
- Aplikasi: http://localhost:8000
- phpMyAdmin: http://localhost:8080

## âš™ï¸ Konfigurasi

### Environment Variables

#### Application Configuration
```env
APP_NAME="IT Help Desk v2.2.0"
APP_ENV=production
APP_DEBUG=false
APP_URL=http://localhost:8000
APP_TIMEZONE=Asia/Jakarta
```

#### Database Configuration
```env
DB_CONNECTION=mysql
DB_HOST=mysql
DB_PORT=3306
DB_DATABASE=it_helpdesk
DB_USERNAME=helpdesk_user
DB_PASSWORD=helpdesk_pass_2024
```

#### MySQL Root Configuration
```env
MYSQL_ROOT_PASSWORD=root_pass_2024_secure
```

### Custom Configuration

#### MySQL Performance
Edit file: `docker/mysql/config/my.cnf`

#### phpMyAdmin Settings
Edit environment variables di `docker-compose.v2.2.yml`:
```yaml
PMA_UPLOAD_LIMIT=100M
PMA_MAX_EXECUTION_TIME=300
PMA_MEMORY_LIMIT=256M
```

## ðŸŽ¯ Penggunaan

### Access Points

1. **Aplikasi Utama**
   - URL: http://localhost:8000
   - Default login: (sesuai dengan seeder database)

2. **phpMyAdmin**
   - URL: http://localhost:8080
   - Server: `mysql`
   - Username: `root`
   - Password: `root_pass_2024_secure`

3. **MySQL Direct Connection**
   - Host: `localhost`
   - Port: `3306`
   - Database: `it_helpdesk`

### Default Accounts

#### Admin Account
- Email: admin@helpdesk.local
- Password: (generated by seeder)

#### User Accounts
- Various demo accounts created by database seeder

## ðŸ³ Manajemen Container

### Deployment Script Usage
```bash
# Full deployment with backup
./scripts/deploy.sh deploy

# Show service status
./scripts/deploy.sh status

# Restart services
./scripts/deploy.sh restart

# Stop all services
./scripts/deploy.sh stop

# View logs
./scripts/deploy.sh logs

# Create backup
./scripts/deploy.sh backup
```

### Manual Docker Commands
```bash
# Start services
docker-compose -f docker-compose.v2.2.yml up -d

# Stop services
docker-compose -f docker-compose.v2.2.yml down

# View logs
docker-compose -f docker-compose.v2.2.yml logs -f

# Scale services (if needed)
docker-compose -f docker-compose.v2.2.yml up -d --scale app=2
```

### Container Health Check
```bash
# Check container status
docker-compose -f docker-compose.v2.2.yml ps

# Check health status
docker-compose -f docker-compose.v2.2.yml exec app curl -f http://localhost/
docker-compose -f docker-compose.v2.2.yml exec mysql mysqladmin ping
```

## ðŸ’¾ Backup dan Restore

### Automated Backup
```bash
# Create backup
./scripts/deploy.sh backup
```

Backup tersimpan di: `backups/`
- Database: `database_backup.sql`
- Storage: `storage_backup_[timestamp].tar.gz`

### Manual Database Backup
```bash
# Export database
docker-compose -f docker-compose.v2.2.yml exec mysql mysqldump -u root -proot_pass_2024_secure it_helpdesk > backup.sql

# Import database
docker-compose -f docker-compose.v2.2.yml exec -T mysql mysql -u root -proot_pass_2024_secure it_helpdesk < backup.sql
```

### Volume Backup
```bash
# Backup MySQL data
docker run --rm -v it-helpdesk_mysql_data:/data -v $(pwd):/backup alpine tar czf /backup/mysql_backup.tar.gz -C /data .

# Backup application logs
docker run --rm -v it-helpdesk_app_logs:/data -v $(pwd):/backup alpine tar czf /backup/logs_backup.tar.gz -C /data .
```

## ðŸ” Troubleshooting

### Common Issues

#### 1. Container Won't Start
```bash
# Check logs
docker-compose -f docker-compose.v2.2.yml logs [service-name]

# Check disk space
df -h

# Check memory
free -h
```

#### 2. Database Connection Failed
```bash
# Check MySQL container
docker-compose -f docker-compose.v2.2.yml exec mysql mysqladmin ping

# Check network connectivity
docker-compose -f docker-compose.v2.2.yml exec app ping mysql

# Reset database password
docker-compose -f docker-compose.v2.2.yml exec mysql mysql -u root -proot_pass_2024_secure
```

#### 3. Permission Issues
```bash
# Fix permissions
docker-compose -f docker-compose.v2.2.yml exec app chown -R www-data:www-data /var/www/html/storage
docker-compose -f docker-compose.v2.2.yml exec app chmod -R 775 /var/www/html/storage
```

#### 4. Port Already in Use
```bash
# Check port usage
netstat -tulpn | grep :8000
netstat -tulpn | grep :8080
netstat -tulpn | grep :3306

# Change ports in docker-compose.v2.2.yml if needed
```

### Performance Issues

#### MySQL Slow Queries
```bash
# Enable slow query log
docker-compose -f docker-compose.v2.2.yml exec mysql mysql -u root -proot_pass_2024_secure -e "SET GLOBAL slow_query_log = 'ON';"

# View slow queries
docker-compose -f docker-compose.v2.2.yml exec mysql cat /var/log/mysql/slow.log
```

#### Application Performance
```bash
# Check PHP error logs
docker-compose -f docker-compose.v2.2.yml exec app tail -f /var/log/apache2/error.log

# Check Laravel logs
docker-compose -f docker-compose.v2.2.yml exec app tail -f /var/www/html/storage/logs/laravel.log
```

## ðŸ”’ Keamanan

### Production Security Checklist

1. **Change Default Passwords**
   ```bash
   # Update MySQL root password
   docker-compose -f docker-compose.v2.2.yml exec mysql mysql -u root -proot_pass_2024_secure
   ALTER USER 'root'@'%' IDENTIFIED BY 'new_secure_password';
   ```

2. **Enable HTTPS**
   - Setup reverse proxy dengan SSL
   - Gunakan Let's Encrypt untuk SSL gratis

3. **Firewall Configuration**
   ```bash
   # UFW example (Ubuntu)
   sudo ufw allow 22/tcp
   sudo ufw allow 80/tcp
   sudo ufw allow 443/tcp
   sudo ufw enable
   ```

4. **Regular Updates**
   ```bash
   # Update Docker images
docker-compose -f docker-compose.v2.2.yml pull
docker-compose -f docker-compose.v2.2.yml up -d
   ```

### Security Headers
Aplikasi sudah dilengkapi dengan security headers:
- X-Content-Type-Options: nosniff
- X-Frame-Options: DENY
- X-XSS-Protection: 1; mode=block

### Database Security
- MySQL root hanya accessible dari internal network
- User privileges sesuai kebutuhan minimum
- Password policy enforcement

## ðŸ“Š Monitoring

### Container Metrics
```bash
# Monitor resource usage
docker stats

# Monitor container logs
docker-compose -f docker-compose.v2.2.yml logs -f --tail=100
```

### Application Monitoring
```bash
# Check Laravel logs
docker-compose -f docker-compose.v2.2.yml exec app tail -f storage/logs/laravel.log

# Monitor queue workers
docker-compose -f docker-compose.v2.2.yml exec app php artisan queue:monitor
```

### Database Monitoring
```bash
# MySQL process list
docker-compose -f docker-compose.v2.2.yml exec mysql mysql -u root -proot_pass_2024_secure -e "SHOW PROCESSLIST;"

# Database size
docker-compose -f docker-compose.v2.2.yml exec mysql mysql -u root -proot_pass_2024_secure -e "SELECT table_schema, SUM(data_length + index_length) / 1024 / 1024 AS 'Size (MB)' FROM information_schema.tables GROUP BY table_schema;"
```

## ðŸ”„ Update dan Maintenance

### Application Updates
```bash
# Pull latest code
git pull origin main

# Rebuild and restart
./scripts/deploy.sh deploy
```

### Database Migrations
```bash
# Run migrations
docker-compose -f docker-compose.v2.2.yml exec app php artisan migrate --force

# Rollback migrations
docker-compose -f docker-compose.v2.2.yml exec app php artisan migrate:rollback
```

### Docker Image Updates
```bash
# Update all images
docker-compose -f docker-compose.v2.2.yml pull
docker-compose -f docker-compose.v2.2.yml up -d

# Clean old images
docker image prune -f
```

## ðŸ“ž Support

### Getting Help
- ðŸ“§ Email: support@helpdesk.local
- ðŸ› Issues: https://github.com/nasrulmufid/it-help-desk/issues
- ðŸ“– Documentation: https://github.com/nasrulmufid/it-help-desk/wiki

### Community
- ðŸ’¬ Discord: [Join Server]
- ðŸ¦ Twitter: [@nasrulmufid]
- ðŸ“º YouTube: [Tutorial Channel]

---

**â­ Jika Anda menemukan proyek ini bermanfaat, silakan berikan bintang di GitHub!**

**Made with â¤ï¸ by Nasrul Mufid**